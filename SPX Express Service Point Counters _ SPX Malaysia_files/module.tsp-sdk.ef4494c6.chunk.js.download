(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{43:function(t,e){},46:function(t,e,n){"use strict";var r=n(48);n(43);e.default=r.a},48:function(t,e,n){"use strict";var r=n(6),o=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(e){i(e)}}function s(t){try{u(r.throw(t))}catch(e){i(e)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}u((r=r.apply(t,e||[])).next())})},i=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},a=n.n(r).a.create({withCredentials:!1,baseURL:""});a.interceptors.request.use(function(t){var e=t.params;t.timeout;return"number"===typeof e&&(t.timeout=e,t.params={}),t}),a.interceptors.response.use(function(t){return t},function(t){return Promise.reject(t.response)});var s=function(t,e,n){return o(void 0,void 0,void 0,function(){var r;return i(this,function(o){switch(o.label){case 0:return[4,a.get(t,{params:e,timeout:n})];case 1:return[2,{headers:(r=o.sent()).headers,body:u(r.data)}]}})})},u=function(t){try{return JSON.parse(t)}catch(e){return t}};function c(t,e,n){if(void 0===n&&(n="string"),!e||"string"!==typeof t)return t;var r=function(t,e){var n=[],r=0,o=Array.isArray(e)?"list":(i=e,null!==i&&"object"===typeof i?"named":"unknown");var i;if("unknown"===o)return n;for(;r<t.length;){var a=t[r];switch(a.type){case"text":n.push(a.value);break;case"list":n.push(e[parseInt(a.value,10)]);break;case"named":"named"===o&&n.push(e[a.value]);break;case"unknown":console.warn("Detect 'unknown' type of token!")}r++}return n}(function(t){t=function(t){if(!t)return t;return t=(t=t.replace(/{{{\s*(.*?)\s*}}}/g,function(t,e){return"{"+e+"}"})).replace(/{{\s*(.*?)\s*}}/g,function(t,e){return"{"+e+"}"})}(t);var e=[],n=0,r="";for(;n<t.length;){var o=t[n++];if("{"===o){r&&e.push({type:"text",value:r}),r="";var i="";for(o=t[n++];void 0!==o&&"}"!==o;)i+=o,o=t[n++];var a="}"===o,s=l.test(i)?"list":a&&f.test(i)?"named":"unknown";e.push({value:i,type:s})}else"%"===o?"{"!==t[n]&&(r+=o):r+=o}return r&&e.push({type:"text",value:r}),e}(t),e);return"string"===n&&"string"!==typeof r?r.join(""):r}var l=/^(?:\d)+/,f=/^(?:\w)+/;var h,p=function(t,e){return["live","stable"].includes(t)?"":e+"nonlive"},d=function(t,e){return"https://seller."+(e?"sg.shopee.cn":"shopee.sg")+"/api/tsp"+p(t,"/")},y=function(t,e){return"https://deo.shopee"+(e?"sz":"mobile")+".com/shopee/shopee-seller-live-sg/tsp/api"+p(t,"-")},v=function(){return(v=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},m=function(t,e,n){null===h||void 0===h||h(v(v({},n),{point_id:t,value:e}))},g=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(e){i(e)}}function s(t){try{u(r.throw(t))}catch(e){i(e)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}u((r=r.apply(t,e||[])).next())})},b=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function w(t){return function(e,n,r){var o=r.value;r.value=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return g(this,void 0,void 0,function(){var n,r;return b(this,function(i){switch(i.label){case 0:return n=0,"undefined"!==typeof window&&"undefined"!==typeof performance&&(n=performance.now()),[4,o.apply(this,e)];case 1:return r=i.sent(),"undefined"!==typeof window&&"undefined"!==typeof performance&&m(t,performance.now()-n),[2,r]}})})}}}var T=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},C=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(e){i(e)}}function s(t){try{u(r.throw(t))}catch(e){i(e)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}u((r=r.apply(t,e||[])).next())})},_=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},k=function(){function t(t,e){var n=this;this.getTranslationFromAPI=function(t){var e,r=t.language,o=t.type,i=t.id,a=t.keys,u=t.hash,c=((e={})[o+"_id"]=i,e.language=r,e.keys=a,e.hash=u,e);return s(n.apiBase+"/transify",c)},this.getTranslationFromCDN=function(t){var e=n.getFileName(t);return s(n.cdnBase+"/"+e)};var r=this.isCN(e);this.apiBase=d(t,r),this.cdnBase=y(t,r)}return t.prototype.init=function(t,e){var n,r;return C(this,void 0,void 0,function(){var o,i;return _(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),o={language:t,resources:null===(n=e.resources)||void 0===n?void 0:n.join(";"),collections:null===(r=e.collections)||void 0===r?void 0:r.join(";")},[4,s(this.apiBase+"/init",o)];case 1:return i=a.sent(),m(101153,1e4),[2,i.body||{}];case 2:return a.sent(),m(101053,0),[2,{}];case 3:return[2]}})})},t.prototype.getFileName=function(t){var e=t.type,n=t.language,r=t.id,o=t.hash,i=e[0]+"_"+r+"_"+n.toLowerCase();return o?i+"_"+o+".js":i+".json"},t.prototype.isCN=function(t){return void 0!==t?t:"cn"===window.location.host.slice(-2)},T([w(101154)],t.prototype,"init",null),t}(),M={},j=0,O={source:function(){var t="delay_token_"+j++;return{token:t,cancel:function(){var e;clearTimeout(null===(e=M[t])||void 0===e?void 0:e.timer),delete M[t]},execute:function(){var e=M[t];if(e)return clearTimeout(e.timer),e.fn()}}}},x=function(t,e,n){return new Promise(function(r,o){var i=setTimeout(function(){t().then(r).catch(o)},e);n&&(M[n]={timer:i,fn:t})})},A={fr:function(t){return 0===t||1===t?"one":t>=1e6?"many":"other"},pl:function(t){return 1===t?"one":Number.isInteger(t)?[2,3,4].includes(t%10)&&![12,13,14].includes(t%100)?"few":![2,3,4].includes(t%10)||[12,13,14].includes(t%100)?"many":"other":"other"},en:function(t){return 0===t?"zero":1===t?"one":"other"}},B=function(){return(B=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},P=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},R=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(e){i(e)}}function s(t){try{u(r.throw(t))}catch(e){i(e)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}u((r=r.apply(t,e||[])).next())})},S=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},I=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r},F=function(){function t(t){var e=this;void 0===t&&(t={}),this.name="",this.isSSR=!1,this.timeout=3e3,this.env="live",this.isMainland=void 0,this.forceUpdate=function(){},this.replacer=function(t){return t},this.commonCache={},this.currentModuleName="",this.baseModules={},this.modules={},this.translationHashes={},this.useCdn=!1,this.initTimer=null,this.initApiCacheUpdateTime=72e5,this.timeLimitedGet=function(t,n){return R(e,void 0,void 0,function(){var e,r,o,i,a=this;return S(this,function(s){return e=[],r=O.source(),this.timeout&&(o=x(function(){var t=B(B({},n),{hash:""});return a.api.getTranslationFromCDN(t).catch(function(){return{headers:{},body:{}}})},this.timeout,r.token),e.push(o)),i=function(){return R(a,void 0,void 0,function(){var e;return S(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,t(n)];case 1:return e=o.sent(),Object.keys(e.body).length?(r.cancel(),[2,e]):[2,r.execute()];case 2:return o.sent(),[2,r.execute()];case 3:return[2]}})})},e.push(i()),[2,Promise.race(e)]})})},t&&(this.name=t.name||"",this.isSSR=t.isSSR||!1),this.api=new k(this.env,!1),this.invokeGlobalHook(),this.isSSR&&"undefined"===typeof window&&(this.initTimer&&clearInterval(this.initTimer),this.initTimer=setInterval(function(){e.updateInitApiCache()},this.initApiCacheUpdateTime))}return t.prototype.create=function(e){return void 0===e&&(e={}),R(this,void 0,void 0,function(){var n,r,o;return S(this,function(i){switch(i.label){case 0:return this.setOptions(e),n=e.translation,[4,this.initRemoteConfig(t.locale,n)];case 1:return r=i.sent(),!n||r.translation&&Object.keys(r.translation).length?[3,3]:(o=r,[4,this.initBaseTranslation(n)]);case 2:o.translation=i.sent(),i.label=3;case 3:return this.exposeTranslator(this),[2,r]}})})},t.prototype.invokeGlobalHook=function(){if("undefined"!==typeof window){var t=window.__tspsdk_global_hooks__;t&&"object"===typeof t&&"function"===typeof t.created&&t.created(this)}},t.prototype.exposeTranslator=function(t){"undefined"!==typeof window&&(window.__tspsdk_translator__||(window.__tspsdk_translator__=[]),window.__tspsdk_translator__.every(function(e){return e!==t})&&window.__tspsdk_translator__.push(t))},t.prototype.setOptions=function(e){var n;void 0!==e.locale&&(t.locale=e.locale),void 0!==e.env&&(this.env=e.env),void 0!==e.timeout&&(this.timeout=e.timeout),this.isMainland=e.isMainland,n=e.papReporter,h=n,this.api=new k(this.env,!!this.isMainland),this.forceUpdate=e.forceUpdate||this.forceUpdate,this.replacer=e.replacer||this.replacer},t.prototype.initRemoteConfig=function(t,e){var n;return void 0===e&&(e={}),R(this,void 0,void 0,function(){var r,o,i,a;return S(this,function(s){switch(s.label){case 0:return r=this.getInitApiCacheKey(t,e.resources,e.collections),(o=this.getInitApiCache(r))&&this.isSSR?(i=o,[3,3]):[3,1];case 1:return[4,this.api.init(t,e)];case 2:i=s.sent(),this.setInitApiCache(r,i),s.label=3;case 3:return this.translationHashes[t]=i.hashes||{},[4,this.setTranslation(t,e,i.translations)];case 4:return a=s.sent(),this.useCdn=!!+((null===(n=i.config)||void 0===n?void 0:n.use_cdn)||""),[2,{translation:a}]}})})},t.prototype.getInitApiCacheKey=function(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=[]);var r=function(t,e){return t-e};return t+"_r"+e.sort(r).join(",")+"_c"+n.sort(r).join(",")},t.prototype.getInitApiParamsByCacheKey=function(t){var e=t.split("_r")[0],n=t.split("_r")[1].split("_c");return{language:e,resources:n[0]?n[0].split(",").map(function(t){return+t}):[],collections:n[1]?n[1].split(",").map(function(t){return+t}):[]}},t.prototype.setTranslation=function(t,e,n){return void 0===n&&(n={}),R(this,void 0,void 0,function(){var r,o,i=this;return S(this,function(a){switch(a.label){case 0:return r=[],o={},["resource","collection"].forEach(function(e){var a=n[e];if(a)for(var s=function(n,a){if(1===a)return r.push(function(){return R(i,void 0,void 0,function(){var r;return S(this,function(i){switch(i.label){case 0:return[4,this.getTranslationByType(e,+n,t)];case 1:return r=i.sent(),Object.assign(o,r),[2,r]}})})}),"continue";i.setCache(e,+n,t,a),Object.assign(o,a)},u=0,c=Object.entries(a);u<c.length;u++){var l=c[u];s(l[0],l[1])}}),r.length?[4,Promise.all(r.map(function(t){return t()}))]:[3,2];case 1:a.sent(),a.label=2;case 2:return e&&(e.name=e.name||"base",this.currentModuleName=e.name,this.mergeModule(this.baseModules,e)),[2,o]}})})},t.prototype.initBaseTranslation=function(t){return this.loadTranslation(t)},t.prototype.getCurrentModule=function(){return this.modules[this.currentModuleName]},t.prototype.getAllModules=function(){return B(B({},this.baseModules),this.modules)},t.prototype.switchLanguage=function(e,n){return R(this,void 0,void 0,function(){var r,o,i,a,s=this;return S(this,function(u){switch(u.label){case 0:return r=this.getAllModules(),o={},n&&(n.map(function(t){o[t]=r[t]}),o=B(B({},this.baseModules),o)),[4,this.initRemoteConfig(e)];case 1:return u.sent(),[4,this.getTranslationByModules(e,n?o:r)];case 2:return i=u.sent(),t.locale=e,this.forceUpdate&&"function"===typeof this.forceUpdate&&setTimeout(function(){s.forceUpdate()},0),[2,(a=Object.assign).call.apply(a,I([null,{}],i))]}})})},t.prototype.switchModule=function(e){if("string"===typeof e){if(!this.getAllModules()[e])throw new Error("module not found");this.currentModuleName=e,e=this.getAllModules()[e]}else{if(!e.name)throw new Error("module must have a name");this.currentModuleName=e.name}return this.getTranslationByModule(t.locale,e)},t.prototype.mergeLocale=function(t,e){return this.mergeTranslation(e,t)},t.prototype.mergeTranslation=function(e,n){for(var r in void 0===n&&(n=t.locale),this.commonCache[n]=this.commonCache[n]||{},e)Object.prototype.hasOwnProperty.call(e,r)&&(this.commonCache[n][r]=e[r])},t.prototype.$tc2=function(t,e,n){return this.$t(t,e,n)},t.prototype.$t=function(t,e,n){var r=this._$t(t,e,n);return r&&"string"===typeof r?r:t},t.prototype.$i=function(t,e){return this._$t(t,"_",e,"raw")||t},t.prototype._$t=function(e,n,r,o){n=Number(n)||n,r&&(n=n||0),null!==n&&"object"===typeof n&&(r=n);var i=this.findTranslationByKey(e);if("number"===typeof n){var a=(A[t.locale]||A.en)(n);if("object"===typeof i)return this.__$t(i[a]||i.one||i.other,r,o);for(var s=0,u=this.pluralFindOrder(a);s<u.length;s++){var c=e+"__"+u[s],l=this.findTranslationByKey(c),f=this.__$t(l,r,o);if(f&&c!==f)return f}}return this.__$t(i,r,o)},t.prototype.pluralFindOrder=function(t){return"one"===t?["one","other"]:"other"===t?["other","one"]:[t,"one","other"]},t.prototype.__$t=function(t,e,n){if("object"===typeof t||!t)return t;var r=t;if(this.replacer)try{r=this.replacer(r)}catch(o){}return e?c(r,e,n):r},t.prototype.getTranslationByKeys=function(t,e,n,r){return this.getTranslationByType(e,n,t,r)},t.prototype.getTranslationByModules=function(t,e){var n=this,r=Object.keys(e).map(function(e){return n.getTranslationByModule(t,n.getAllModules()[e])});return Promise.all(r)},t.prototype.getTranslationByModule=function(t,e){return R(this,void 0,void 0,function(){var n,r,o,i,a,s,u,c,l=this;return S(this,function(f){switch(f.label){case 0:return e?(e.name=e.name||"mod_"+Date.now(),this.mergeModule(this.modules,e),n=e.resources,r=e.collections,o=e.lazyResources,i=e.lazyCollections,a=e.lazyTime,s=[],(null===r||void 0===r?void 0:r.length)&&s.push.apply(s,r.map(function(e){return l.getTranslationByType("collection",e,t)})),(null===n||void 0===n?void 0:n.length)&&s.push.apply(s,n.map(function(e){return l.getTranslationByType("resource",e,t)})),o&&o.length&&setTimeout(function(){null===o||void 0===o||o.forEach(function(e){return l.getTranslationByType("resource",e,t)})},a||3e3),i&&i.length&&setTimeout(function(){null===i||void 0===i||i.map(function(e){return l.getTranslationByType("collection",e,t)})},a||3e3),[4,Promise.all(s)]):[2,{}];case 1:return u=f.sent(),[2,(c=Object.assign).call.apply(c,I([null,{}],u))]}})})},t.prototype.loadTranslation=function(e,n){return this.getTranslationByModule(n||t.locale,e)},t.prototype.getTranslations=function(t,e){return this.getTranslationByModule(t,e)},t.prototype.getTranslationByType=function(t,e,n,r){return R(this,void 0,void 0,function(){var o,i;return S(this,function(a){switch(a.label){case 0:return(o=this.getCache(t,e,n))?[2,o]:[4,this.fetchTranslation(t,e,n,r)];case 1:return i=a.sent().body,r?this.mergeTranslation(i,n):this.setCache(t,e,n,i),[2,i]}})})},t.prototype.fetchTranslation=function(t,e,n,r){var o,i;return R(this,void 0,void 0,function(){var a,s;return S(this,function(u){return a=null===(i=null===(o=this.translationHashes[n])||void 0===o?void 0:o[t])||void 0===i?void 0:i[e],s=this.useCdn?this.api.getTranslationFromCDN:this.api.getTranslationFromAPI,[2,this.timeLimitedGet(s,{type:t,id:e,language:n,hash:a,keys:r})]})})},t.prototype.getCacheKey=function(t,e){return t+"_"+e.toLowerCase()},t.prototype.setCache=function(e,n,r,o){var i="resource"===e?t.resourceCache:t.collectionCache,a=this.getCacheKey(n,r);i[a]=i[a]||{},i[a]=B(B({},i[a]),o)},t.prototype.getCache=function(e,n,r){return("resource"===e?t.resourceCache:t.collectionCache)[this.getCacheKey(n,r)]},t.prototype.setInitApiCache=function(e,n){return t.initApiCache[e]=n},t.prototype.getInitApiCache=function(e){return t.initApiCache[e]},t.prototype.updateInitApiCache=function(){return R(this,void 0,void 0,function(){var e,n,r=this;return S(this,function(o){switch(o.label){case 0:return t.initApiCache?(e=Object.keys(t.initApiCache),n=e.map(function(t){return R(r,void 0,void 0,function(){var e,n,r,o,i=this;return S(this,function(a){return e=this.getInitApiParamsByCacheKey(t),n=e.language,r=e.resources,o=e.collections,[2,this.api.init(n,{resources:r,collections:o}).then(function(e){i.setInitApiCache(t,e)})]})})}),[4,Promise.all(n)]):[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})},t.prototype.findTranslationByKey=function(t){var e="",n=this.getCurrentModule();if(n&&(e=this.findTranslationFromModule(t,n)))return e;for(var r=Object.keys(this.baseModules),o=0;o<r.length;o++){var i=r[o];if(e=this.findTranslationFromModule(t,this.baseModules[i]))return e}if(e=this.findTranslationFromCommon(t))return e;var a=this.getAllModules(),s=Object.keys(a);for(o=0;o<s.length;o++){var u=s[o];if(e=this.findTranslationFromModule(t,a[u]))return e}return e||""},t.prototype.findTranslationFromModule=function(e,n){for(var r=(n.collections||[]).concat(n.lazyCollections||[]),o=(n.resources||[]).concat(n.lazyResources||[]),i=0;i<r.length;i++){if((a=this.getCache("collection",r[i],t.locale))&&a[e])return a[e]}for(i=0;i<o.length;i++){var a;if((a=this.getCache("resource",o[i],t.locale))&&a[e])return a[e]}return""},t.prototype.findTranslationFromCommon=function(e){var n=this.commonCache[t.locale];return n&&n[e]?n[e]:""},t.prototype.mergeModule=function(t,e){var n=t[e.name+""];n?(n.collections=n.collections||[],n.resources=n.resources||[],e.collections=e.collections||[],e.resources=e.resources||[],e.collections.map(function(t){var e;-1===(null===(e=n.collections)||void 0===e?void 0:e.indexOf(t))&&n.collections.push(t)}),e.resources.map(function(t){var e;-1===(null===(e=n.resources)||void 0===e?void 0:e.indexOf(t))&&n.resources.push(t)})):t[e.name+""]=e},t.version="0.2.3",t.locale="en",t.resourceCache={},t.collectionCache={},t.initApiCache={},P([w(101422)],t.prototype,"create",null),P([w(101423)],t.prototype,"initRemoteConfig",null),P([w(101424)],t.prototype,"setTranslation",null),P([w(101427)],t.prototype,"initBaseTranslation",null),t}();e.a=F}}]);